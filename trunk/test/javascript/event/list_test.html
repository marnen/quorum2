<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
        "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
  <title>JavaScript unit test file</title>
  <meta http-equiv="content-type" content="text/html; charset=utf-8" />
    <script src="../assets/prototype.js" type="text/javascript"></script>
    <script src="../assets/unittest.js" type="text/javascript"></script>
  
  <script src="../../../public/javascripts/lowpro/lowpro.js" type="text/javascript"></script>
  <script src="../../../public/javascripts/event/list.js" type="text/javascript"></script>
  
  <link rel="stylesheet" href="../assets/unittest.css" type="text/css" />
</head>
<body>

<div id="content">

  <div id="header">
    <h1>JavaScript unit test file</h1>
    <p>
      This file tests <strong>event/list.js</strong>.
    </p>
  </div>

  <!-- Log output (one per Runner, via {testLog: "testlog"} option)-->
  <div id="testlog"></div>
  
  <!-- Put or load sample/test html here (load via sampleLoad(file) in setup() methods) -->
  <div id="sample"></div>
    <table class="events">
  <tr>
    <td class="edit"><!-- blank --></td>
    <th><a href="/event/list/date/desc" class="sort">Date</a> ↑</th>
    <th><a href="/event/list/name" class="sort">Event</a> </th>
    <th>Status</th>
    <th>Attending</th>
    <th>Not attending</th>
  </tr>
      <tr class="vevent" id="event_953125641">
      <td class="edit">
                  <a href="/event/953125641/edit">edit</a><br />
                          <a href="/event/953125641/delete">delete</a>        
      </td>
      <td>
        <span class="uid">event-953125641@quorum2.ebon-askavi.homedns.org</span>
        <abbr class="dtstart" title="20080110">10 Jan 2008</abbr>
      </td>
      <td>
        <h3 class="summary">Event 1 with &lt;&gt; signs</h3>
        <span class="location vcard">
          Marnen's house<br />
          <span class="street-address">80 State Street<br />2nd floor</span><br />
          <span class="locality">Albany</span>, <span class="region">NY</span>, <span class="country-name">US</span>
        </span><br />
        <span class="distance">1.6 miles</span> • <span class="map"><a href="/event/953125641/map" target="map">map</a></span>
        <p><a href="/event/953125641/export" class="ical">iCal</a></p>
      </td>
      <td class="yes"><form action="/event/953125641/change_status" class="attendance" name="e953125641"><p>You are currently <span class="yes">attending</span>.</p><select class="commit" name="status"><option value="maybe">uncommitted</option>
<option value="no">not attending</option>
<option value="yes" selected="selected">attending</option></select><br /><input name="commit" type="submit" value="Change status" /></form></td>
      <td>Marnen Laibow-Koser</td>
      <td>Millie Cady</td>
    </tr>
    <tr class="vevent" id="event_996332877">
      <td class="edit">
                  <a href="/event/996332877/edit">edit</a><br />
                          <a href="/event/996332877/delete">delete</a>        
      </td>
      <td>
        <span class="uid">event-996332877@quorum2.ebon-askavi.homedns.org</span>
        <abbr class="dtstart" title="20080222">22 Feb 2008</abbr>
      </td>
      <td>
        <h3 class="summary">Event 2</h3>
        <span class="location vcard">
          Event 2 site<br />
          <span class="street-address">Event 2 street<br />Event 2 street2</span><br />
          <span class="locality">Event 2 city</span>, <span class="region">ON</span>, <span class="country-name">CA</span>
        </span><br />
        <span class="distance">5399.2 miles</span> • <span class="map"><a href="/event/996332877/map" target="map">map</a></span>
        <p><a href="/event/996332877/export" class="ical">iCal</a></p>
      </td>
      <td class="maybe"><form action="/event/996332877/change_status" class="attendance" name="e996332877"><p>You are currently <span class="maybe">uncommitted</span>.</p><select class="commit" name="status"><option value="maybe" selected="selected">uncommitted</option>
<option value="no">not attending</option>
<option value="yes">attending</option></select><br /><input name="commit" type="submit" value="Change status" /></form></td>
      <td></td>
      <td></td>
    </tr>

</table>
</div>

<script type="text/javascript">
// <![CDATA[

  Test.context('Ajax attendance forms', {
    // replace this with your real tests
    
    setup: function() {
			
    },
    
    teardown: function() {
      
    },
    
    'should hide submit button': function () {
      var submits = $$('form.attendance input[type=submit]');
			(typeof submits).shouldEqual(typeof []);
			submits.shouldNotEqual([]);
			for (var i = 0; i < submits.length; ++i) {
				s = submits[i];
				s.style.display.shouldEqual('none');
			}
    },
		
		'should make an Ajax submission when the status selector is changed': function () {
			var selectors = $$('form.attendance select.commit');
      (typeof selectors).shouldEqual(typeof []);
      selectors.shouldNotEqual([]);
			for (var i = 0; i < selectors.length; ++i) {
				s = selectors[i];
				info(s + "should have an onChange event, but I don't know how to write this test.");
			}
		}
      
  }); 
  // For each Test.UnitRunner instance, specify the element id where results will be
  // published; e.g. <div id="testlog"/> above.
  // That is, you can have multiple "new Test.Unit.Runner() { ... }" on this page, just
  // create more <div id="testlog2"></div> etc, and pass the element id to the hash above:
  // e.g. {testLog: "testlog2"}
// ]]>
</script>
</body>
</html>