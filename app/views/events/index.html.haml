- content_for :head do
  = auto_discovery_link_tag :rss, rss_url
- content_for :javascript do
  = javascript_include_tag :defaults, 'lowpro/lowpro', 'events/index'
%p.rss
  = h(_("Your personal %{RSS_feed} for this page is available at %{URL}")) % {:RSS_feed => link_to(h(_('RSS feed')), rss_url), :URL => content_tag(:span, h(rss_url), :class => :url)}
  %br
  = h(_("If you'd like to change that URL and disable any previous access, we can %{regenerate_it}.")) % {:regenerate_it => link_to(h(_('regenerate it')), regenerate_key_path)}
- form_tag events_path, :method => :get do
  - fields_for :search do |s|
    &= _('From:')
    %label
      = s.radio_button :from_date_preset, 'today', :checked => true
      &= _('Today')
    %label
      = s.radio_button :from_date_preset, 'earliest'
      &= _('Earliest event')
    %label
      = s.radio_button :from_date_preset, 'other'
      &= _('Other date:')
    = s.date_select('from_date', :order => [:day, :month, :year])
    %br
    &= _('To:')
    %label
      = s.radio_button :to_date_preset, 'latest', :checked => true
      &= _('Latest event')
    %label
      = s.radio_button :to_date_preset, 'other'
      &= _('Other date:')
    = s.date_select('to_date', :order => [:day, :month, :year])
    %br
  = submit_tag(h(_('Search')), :name => nil)
%table.events
  = render :partial => 'table_header'
  = render :partial => 'event', :collection => @events